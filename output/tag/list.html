<!DOCTYPE html>
<html lang="zh_cn">
<head>
        <meta charset="utf-8" />
        <title>Hsu's Home - list</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Hsu's Home </a></h1>
                <nav><ul>
                    <li><a href="/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/2017-9-5-python-list-pai-xu-sort-sorted.html">2017-9-5 python  list 排序 sort、sorted</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-09-05T15:17:50+08:00">
                Published: Tue 05 September 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/chihwei-hsu.html">Chihwei-Hsu</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/python.html">[Python</a> <a href="/tag/list.html">list</a> <a href="/tag/sort.html">sort]</a> </p>
</footer><!-- /.post-info --><h3>情景描述：</h3>
<blockquote>
<p>项目中，有一个list，list内部组成元素为dict，现需要根据dict中某个键的值来进行排序。</p>
</blockquote>
<!-- more -->

<h3>代码实现：</h3>
<blockquote>
<p><code>reverse</code>: False--默认，正序；True--逆序，由大到小；
 <code>key</code>: 可以根据<code>key</code>值自定义排序；
 <code>sort</code>与<code>sorted</code>区别: <code>sort</code>list自身发生改变；<code>sorted</code>list本身不发生改变。</p>
</blockquote>
<div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>        

 <span class="c1"># sorted 用法</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>                  <span class="c1">#将a从小到大排序,不影响a本身结构 </span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">reverse</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>   <span class="c1">#将a从大到小排序,不影响a本身结构 </span>
<span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> 

 <span class="c1"># sort 用法</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>                   <span class="c1">#将a从小到大排序,影响a本身结构 </span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> 
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>     <span class="c1">#将a从大到小排序,影响a本身结构 </span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">a</span> 
<span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> 

<span class="c1"># 注意，a.sort() 已改变其结构，b = a.sort() 是错误的写法! </span>

<span class="c1"># 非数字排序</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;aa&#39;</span><span class="p">,</span><span class="s1">&#39;BB&#39;</span><span class="p">,</span><span class="s1">&#39;bb&#39;</span><span class="p">,</span><span class="s1">&#39;zz&#39;</span><span class="p">,</span><span class="s1">&#39;CC&#39;</span><span class="p">]</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> 
<span class="p">[</span><span class="s1">&#39;BB&#39;</span><span class="p">,</span> <span class="s1">&#39;CC&#39;</span><span class="p">,</span> <span class="s1">&#39;aa&#39;</span><span class="p">,</span> <span class="s1">&#39;bb&#39;</span><span class="p">,</span> <span class="s1">&#39;zz&#39;</span><span class="p">]</span>    <span class="c1">#按列表中元素每个字母的ascii码从小到大排序,如果要从大到小,请用sorted(b,reverse=True)下同 </span>

 <span class="c1"># 根据key值自定义排序</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span><span class="p">[</span><span class="s1">&#39;CCC&#39;</span><span class="p">,</span> <span class="s1">&#39;bb&#39;</span><span class="p">,</span> <span class="s1">&#39;ffff&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">]</span>  
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>             <span class="c1">#按列表的元素的长度排序 </span>
<span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;bb&#39;</span><span class="p">,</span> <span class="s1">&#39;CCC&#39;</span><span class="p">,</span> <span class="s1">&#39;ffff&#39;</span><span class="p">]</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span><span class="p">[</span><span class="s1">&#39;CCC&#39;</span><span class="p">,</span> <span class="s1">&#39;bb&#39;</span><span class="p">,</span> <span class="s1">&#39;ffff&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">]</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">key</span> <span class="o">=</span> <span class="nb">str</span><span class="o">.</span><span class="n">lower</span> <span class="p">)</span>    <span class="c1">#将列表中的每个元素变为小写，再按每个元素中的每个字母的ascii码从小到大排序 </span>
<span class="p">[</span><span class="s1">&#39;bb&#39;</span><span class="p">,</span> <span class="s1">&#39;CCC&#39;</span><span class="p">,</span> <span class="s1">&#39;ffff&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">]</span> 

<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">lastchar</span><span class="p">(</span><span class="n">s</span><span class="p">):</span> 
       <span class="k">return</span> <span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">e</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;AAz&#39;</span><span class="p">,</span><span class="s1">&#39;ef&#39;</span><span class="p">]</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">e</span><span class="p">,</span><span class="n">key</span> <span class="o">=</span> <span class="n">lastchar</span><span class="p">)</span>      <span class="c1">#自定义函数排序,lastchar为函数名，这个函数返回列表e中每个元素的最后一个字母 </span>
<span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="s1">&#39;ef&#39;</span><span class="p">,</span> <span class="s1">&#39;AAz&#39;</span><span class="p">]</span>         <span class="c1">#sorted(e,key=lastchar)作用就是 按列表e中每个元素的最后一个字母的ascii码从小到大排序 </span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">},{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;def&#39;</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">:</span><span class="mi">30</span><span class="p">},{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;ghi&#39;</span><span class="p">,</span><span class="s1">&#39;age&#39;</span><span class="p">:</span><span class="mi">25</span><span class="p">}]</span>     <span class="c1">#列表中的元素为字典 </span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">age</span><span class="p">(</span><span class="n">s</span><span class="p">):</span> 
       <span class="k">return</span> <span class="n">s</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="n">ff</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">key</span> <span class="o">=</span> <span class="n">age</span><span class="p">)</span>      <span class="c1">#自定义函数按列表f中字典的age从小到大排序  </span>
<span class="p">[{</span><span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;abc&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;ghi&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;def&#39;</span><span class="p">}]</span> 

<span class="o">&gt;&gt;&gt;</span> <span class="n">f2</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>    <span class="c1">#如果觉得上面定义一个函数代码不美观，可以用lambda的形式来定义函数,效果[{&#39;age&#39;: 20, &#39;name&#39;: &#39;abc&#39;}, {&#39;age&#39;: 25, &#39;name&#39;: &#39;ghi&#39;}, {&#39;age&#39;: 30, &#39;name&#39;: &#39;def&#39;}] </span>
</pre></div>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/2017-5-23-yi-ge-dou-hao-yin-qi-de-bug.html" rel="bookmark"
                           title="Permalink to 2017-5-23 一个逗号(,)引起的BUG">2017-5-23 一个逗号(,)引起的BUG</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-05-23T22:45:11+08:00">
                Published: Tue 23 May 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/chihwei-hsu.html">Chihwei-Hsu</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/python.html">[Python</a> <a href="/tag/list.html">list</a> <a href="/tag/tuple.html">tuple]</a> </p>
</footer><!-- /.post-info -->                <p>昨天工作，突然发现之前好好的list，在赋值给新变量后居然类型变了，一个好好的list几分钟不见妥妥的叛变了，变成了tuple，由此，一场闹剧开始上演...
<!-- more --></p>
<h3>前情回要：</h3>
<p>话说有一个类对象内有一方法如下：</p>
<div class="highlight"><pre><span></span>def call_frequency(self, data):
    ...
    return list
</pre></div>


<p>返回的是一个list，内部是一个个dict，结构如下：</p>
<div class="highlight"><pre><span></span>[{xx:xxx,xx:xxx},{xx:xxx,},{x:xxx},...]
</pre></div>


<h3>闹剧上演：</h3>
<p>ok，开始今天任务，开始在另一方法中调用赋值：</p>
<div class="highlight"><pre><span></span>data_list = self.call_frequency(data)
</pre></div>


<p>结果<code>print data_list</code>，返回值如下：</p>
<div class="highlight"><pre><span></span>([{xx:xxx,xx:xxx},{xx:xxx,},{x:xxx},...],)
</pre></div>


<p>what a fxxk，瞬间 …</p>
                <a class="readmore" href="/2017-5-23-yi-ge-dou-hao-yin-qi-de-bug.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>