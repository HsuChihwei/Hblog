<!DOCTYPE html>
<html lang="zh_cn">
<head>
        <meta charset="utf-8" />
        <title>Hsu's Home - tuple]</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Hsu's Home </a></h1>
                <nav><ul>
                    <li><a href="/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/2017-5-23-yi-ge-dou-hao-yin-qi-de-bug.html">2017-5-23 一个逗号(,)引起的BUG</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-05-23T22:45:11+08:00">
                Published: Tue 23 May 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/chihwei-hsu.html">Chihwei-Hsu</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>
<p>tags: <a href="/tag/python.html">[Python</a> <a href="/tag/list.html">list</a> <a href="/tag/tuple.html">tuple]</a> </p>
</footer><!-- /.post-info --><p>昨天工作，突然发现之前好好的list，在赋值给新变量后居然类型变了，一个好好的list几分钟不见妥妥的叛变了，变成了tuple，由此，一场闹剧开始上演...
<!-- more --></p>
<h3>前情回要：</h3>
<p>话说有一个类对象内有一方法如下：</p>
<div class="highlight"><pre><span></span>def call_frequency(self, data):
    ...
    return list
</pre></div>


<p>返回的是一个list，内部是一个个dict，结构如下：</p>
<div class="highlight"><pre><span></span>[{xx:xxx,xx:xxx},{xx:xxx,},{x:xxx},...]
</pre></div>


<h3>闹剧上演：</h3>
<p>ok，开始今天任务，开始在另一方法中调用赋值：</p>
<div class="highlight"><pre><span></span>data_list = self.call_frequency(data)
</pre></div>


<p>结果<code>print data_list</code>，返回值如下：</p>
<div class="highlight"><pre><span></span>([{xx:xxx,xx:xxx},{xx:xxx,},{x:xxx},...],)
</pre></div>


<p>what a fxxk，瞬间，凌乱了，还以为发现新天地了，啊！原来，list赋值后会变成tuple，加个马甲，以前怎么没发现呢...
还自以为是的在调用<code>data_list</code>时，如下：</p>
<div class="highlight"><pre><span></span>call_tel_list = [v.get(&quot;call_tel&quot;,&quot;&quot;) for v in data_list[0]]
</pre></div>


<h3>惊天逆转</h3>
<p>晚上，回家，比较得意，欸，又学到一招，不错哟，积蓄，努力。</p>
<p>8小时后，天亮了：</p>
<div class="highlight"><pre><span></span>data_list = self.call_frequency(data),
</pre></div>


<p>咦，这里怎么有个逗号？</p>
<p>瞬间，懵逼...</p>
<p>四下瞅瞅，</p>
<p>然后，按下←，整个世界清静了，再悄悄把昨天的杰作恢复本来面目，</p>
<p>嗯，今天，天气真好。</p>
<p>真的！</p>
<blockquote class="blockquote-center">完</blockquote>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>